apiVersion: v1
kind: Pod
metadata:
  name: test-notation
  namespace: keeper-e2e-test
  annotations:
    keeper.security/inject: "true"
    keeper.security/ksm-config: "keeper-auth"
    # Test 1: Standard title-based lookup
    keeper.security/secret: "KC-Secret-Demo"
    # Test 2: Keeper notation with UID and field extraction
    keeper.security/secret-password: "keeper://QabbPIdM8Unw4hwVM-F8VQ/field/password:/keeper/secrets/demo-password"
    # Test 3: File attachment
    keeper.security/file-mykey: "ExcelPassword:mykey.pem:/keeper/secrets/mykey.pem"
    # Configuration
    keeper.security/init-only: "true"
    keeper.security/fail-on-error: "true"
spec:
  containers:
    - name: test
      image: busybox
      command: ["sh", "-c", "echo 'Secrets injected:' && ls -la /keeper/secrets/ && echo '---' && cat /keeper/secrets/kc-secret-demo.json && echo '---' && cat /keeper/secrets/demo-password && echo '---' && head -c 100 /keeper/secrets/mykey.pem && sleep 3600"]
  restartPolicy: Never
