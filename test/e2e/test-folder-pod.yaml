apiVersion: v1
kind: Pod
metadata:
  name: test-folder
  namespace: keeper-e2e-test
  annotations:
    keeper.security/inject: "true"
    keeper.security/auth-secret: "keeper-auth"
    # Test folder support - fetch all secrets from a folder
    # Option 1: Use folder UID (recommended)
    # keeper.security/folder-uid: "YOUR_FOLDER_UID_HERE"
    # Option 2: Use folder path (not yet implemented)
    # keeper.security/folder: "Production/Databases"
    # keeper.security/folder-path: "/keeper/folder-secrets"
    #
    # NOTE: Folder path lookup is not yet implemented.
    # Use keeper.security/folder-uid with the actual folder UID from Keeper.
    # Configuration
    keeper.security/init-only: "true"
    keeper.security/fail-on-error: "false"
    # For testing without a folder, include a regular secret
    keeper.security/secret: "KC-Secret-Demo"
spec:
  containers:
    - name: test
      image: busybox
      command: ["sh", "-c", "echo 'Secrets:' && ls -la /keeper/secrets/ && sleep 3600"]
  restartPolicy: Never
